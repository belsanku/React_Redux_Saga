{"ast":null,"code":"/**\r\n * Performs registration in the LS\r\n * @param username {string}\r\n * @param password {string}\r\n * @returns {Promise<{ data: Record<string, string> }>}\r\n */\nexport const register = _ref => {\n  let {\n    user: {\n      username,\n      password\n    }\n  } = _ref;\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (Math.random() > 0.2) {\n        const stringUsers = localStorage.getItem('users') || '';\n        const users = JSON.parse(stringUsers) || [];\n\n        if (users.find(user => user.username === username)) {\n          throw new Error('User already exists!');\n        }\n\n        const newUser = {\n          username,\n          password,\n          id: Date.now(),\n          createdAt: new Date().toString()\n        };\n        localStorage.setItem('users', JSON.stringify([...users, newUser]));\n        resolve({\n          data: newUser\n        });\n      } else {\n        throw new Error('Network error!');\n      }\n    }, 1000);\n  });\n};\n/**\r\n * Performs login according to the current LS users state\r\n * @param username {string}\r\n * @param password {string}\r\n * @returns {Promise<{ data: Record<string, string> }>}\r\n */\n\nexport const login = _ref2 => {\n  let {\n    user: {\n      username,\n      password\n    }\n  } = _ref2;\n  console.log('Log request: ', username, password);\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (Math.random() > 0.2) {\n        const stringUsers = localStorage.getItem('users');\n        const users = JSON.parse(stringUsers);\n\n        if (!!users[username]) {\n          throw new Error('No such user found!');\n        }\n\n        const lsCurrentUser = users[username];\n        console.log(users);\n        console.log('password', password);\n\n        if (lsCurrentUser.password.toString() !== password.toString()) {\n          throw new Error('Incorrect password!');\n        }\n\n        resolve({\n          data: lsCurrentUser\n        });\n      } else {\n        throw new Error('Network error!');\n      }\n    }, 1000);\n  });\n};","map":{"version":3,"sources":["F:/noveo/my-react-app/src/services/requests.js"],"names":["register","user","username","password","Promise","resolve","reject","setTimeout","Math","random","stringUsers","localStorage","getItem","users","JSON","parse","find","Error","newUser","id","Date","now","createdAt","toString","setItem","stringify","data","login","console","log","lsCurrentUser"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMA,QAAQ,GAAG,QAAqC;AAAA,MAApC;AAACC,IAAAA,IAAI,EAAG;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ;AAAR,GAAoC;AACzD,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCC,IAAAA,UAAU,CAAC,MAAM;AACb,UAAIC,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACrB,cAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,KAAiC,EAArD;AACA,cAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWL,WAAX,KAA2B,EAAzC;;AAEA,YAAIG,KAAK,CAACG,IAAN,CAAYf,IAAD,IAAUA,IAAI,CAACC,QAAL,KAAkBA,QAAvC,CAAJ,EAAsD;AAClD,gBAAM,IAAIe,KAAJ,CAAU,sBAAV,CAAN;AACH;;AAED,cAAMC,OAAO,GAAG;AACZhB,UAAAA,QADY;AAEZC,UAAAA,QAFY;AAGZgB,UAAAA,EAAE,EAAEC,IAAI,CAACC,GAAL,EAHQ;AAIZC,UAAAA,SAAS,EAAG,IAAIF,IAAJ,EAAD,CAAaG,QAAb;AAJC,SAAhB;AAOAZ,QAAAA,YAAY,CAACa,OAAb,CAAqB,OAArB,EAA8BV,IAAI,CAACW,SAAL,CAAe,CAAC,GAAGZ,KAAJ,EAAWK,OAAX,CAAf,CAA9B;AACAb,QAAAA,OAAO,CAAC;AAAEqB,UAAAA,IAAI,EAAER;AAAR,SAAD,CAAP;AACH,OAjBD,MAiBO;AACH,cAAM,IAAID,KAAJ,CAAU,gBAAV,CAAN;AACH;AACJ,KArBS,EAqBP,IArBO,CAAV;AAsBH,GAvBM,CAAP;AAwBH,CAzBM;AA2BP;AACA;AACA;AACA;AACA;AACA;;AACA,OAAO,MAAMU,KAAK,GAAG,SAAqC;AAAA,MAApC;AAAC1B,IAAAA,IAAI,EAAG;AAAEC,MAAAA,QAAF;AAAYC,MAAAA;AAAZ;AAAR,GAAoC;AACtDyB,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6B3B,QAA7B,EAAuCC,QAAvC;AACA,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACpCC,IAAAA,UAAU,CAAC,MAAM;AACb,UAAIC,IAAI,CAACC,MAAL,KAAgB,GAApB,EAAyB;AACrB,cAAMC,WAAW,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAApB;AACA,cAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWL,WAAX,CAAd;;AAEA,YAAI,CAAC,CAACG,KAAK,CAACX,QAAD,CAAX,EAAuB;AACnB,gBAAM,IAAIe,KAAJ,CAAU,qBAAV,CAAN;AACH;;AAED,cAAMa,aAAa,GAAGjB,KAAK,CAACX,QAAD,CAA3B;AACA0B,QAAAA,OAAO,CAACC,GAAR,CAAYhB,KAAZ;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwB1B,QAAxB;;AACA,YAAI2B,aAAa,CAAC3B,QAAd,CAAuBoB,QAAvB,OAAsCpB,QAAQ,CAACoB,QAAT,EAA1C,EAA+D;AAC3D,gBAAM,IAAIN,KAAJ,CAAU,qBAAV,CAAN;AACH;;AAEDZ,QAAAA,OAAO,CAAC;AAAEqB,UAAAA,IAAI,EAAEI;AAAR,SAAD,CAAP;AACH,OAhBD,MAgBO;AACH,cAAM,IAAIb,KAAJ,CAAU,gBAAV,CAAN;AACH;AACJ,KApBS,EAoBP,IApBO,CAAV;AAqBH,GAtBM,CAAP;AAuBH,CAzBM","sourcesContent":["/**\r\n * Performs registration in the LS\r\n * @param username {string}\r\n * @param password {string}\r\n * @returns {Promise<{ data: Record<string, string> }>}\r\n */\r\nexport const register = ({user : { username, password }}) => {\r\n    return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n            if (Math.random() > 0.2) {\r\n                const stringUsers = localStorage.getItem('users') || '';\r\n                const users = JSON.parse(stringUsers) || [];\r\n\r\n                if (users.find((user) => user.username === username)) {\r\n                    throw(new Error('User already exists!'));\r\n                }\r\n\r\n                const newUser = {\r\n                    username,\r\n                    password,\r\n                    id: Date.now(),\r\n                    createdAt: (new Date()).toString()\r\n                };\r\n\r\n                localStorage.setItem('users', JSON.stringify([...users, newUser]));\r\n                resolve({ data: newUser });\r\n            } else {\r\n                throw(new Error('Network error!'));\r\n            }\r\n        }, 1000);\r\n    });\r\n}\r\n\r\n/**\r\n * Performs login according to the current LS users state\r\n * @param username {string}\r\n * @param password {string}\r\n * @returns {Promise<{ data: Record<string, string> }>}\r\n */\r\nexport const login = ({user : { username, password }}) => {\r\n    console.log('Log request: ', username, password);\r\n    return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n            if (Math.random() > 0.2) {\r\n                const stringUsers = localStorage.getItem('users');\r\n                const users = JSON.parse(stringUsers);\r\n\r\n                if (!!users[username]) {\r\n                    throw(new Error('No such user found!'));\r\n                }\r\n\r\n                const lsCurrentUser = users[username];\r\n                console.log(users);\r\n                console.log('password', password);\r\n                if (lsCurrentUser.password.toString() !== password.toString()) {\r\n                    throw(new Error('Incorrect password!'));\r\n                }\r\n\r\n                resolve({ data: lsCurrentUser });\r\n            } else {\r\n                throw(new Error('Network error!'));\r\n            }\r\n        }, 1000);\r\n    });\r\n};"]},"metadata":{},"sourceType":"module"}